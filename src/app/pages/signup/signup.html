<form
  class="flex flex-col gap-4 max-w-sm mx-auto mt-10 p-6 bg-white rounded shadow"
  [formGroup]="signupControl"
  (ngSubmit)="onSubmit()"
>
  <h2 class="text-2xl font-bold mb-2 text-center">Sign Up</h2>
  <div class="flex flex-col gap-1">
    <label for="username-input">
      <span class="text-sm font-medium">Username</span>
    </label>
    <input
      id="username-input"
      type="text"
      class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      required
      [maxlength]="20"
      formControlName="username"
    />
    @if(signupControl.get('username')?.hasError('required') &&
    signupControl.get('username')?.touched) {
    <div class="text-red-500 text-sm">Please enter your username</div>
    }
  </div>
  <div class="flex flex-col gap-1">
    <label for="password-input">
      <span class="text-sm font-medium">Password</span>
    </label>
    <input
      id="password-input"
      type="password"
      class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      required
      formControlName="password"
    />
    @if(signupControl.get('password')?.hasError('required') &&
    signupControl.get('password')?.touched) {
    <div class="text-red-500 text-sm">Please enter your password</div>
    }
    <!-- To-do: Create a password validation component -->
    <ul class="text-sm mt-1">
      <li
        class="flex items-center gap-2"
        [class.text-green-600]="
          !signupControl.get('password')?.hasError('forbiddenCapital')
        "
        [class.text-red-500]="
          signupControl.get('password')?.hasError('forbiddenCapital')
        "
      >
        <span>
          {{
            signupControl.get("password")?.hasError("forbiddenCapital")
              ? "✗"
              : "✓"
          }}
        </span>
        At least one uppercase letter
      </li>
      <li
        class="flex items-center gap-2"
        [class.text-green-600]="
          !signupControl.get('password')?.hasError('forbiddenCommon')
        "
        [class.text-red-500]="
          signupControl.get('password')?.hasError('forbiddenCommon')
        "
      >
        <span>
          {{
            signupControl.get("password")?.hasError("forbiddenCommon")
              ? "✗"
              : "✓"
          }}
        </span>
        At least one lowercase letter
      </li>
      <li
        class="flex items-center gap-2"
        [class.text-green-600]="
          !signupControl.get('password')?.hasError('forbiddenNumber')
        "
        [class.text-red-500]="
          signupControl.get('password')?.hasError('forbiddenNumber')
        "
      >
        <span>
          {{
            signupControl.get("password")?.hasError("forbiddenNumber")
              ? "✗"
              : "✓"
          }}
        </span>
        At least one number
      </li>
      <li
        class="flex items-center gap-2"
        [class.text-green-600]="
          !signupControl.get('password')?.hasError('forbiddenSpecial')
        "
        [class.text-red-500]="
          signupControl.get('password')?.hasError('forbiddenSpecial')
        "
      >
        <span>
          {{
            signupControl.get("password")?.hasError("forbiddenSpecial")
              ? "✗"
              : "✓"
          }}
        </span>
        At least one special character
      </li>
    </ul>
  </div>
  <div class="flex flex-col gap-1">
    <label for="confirm-password-input">
      <span class="text-sm font-medium">Confirm Password</span>
    </label>
    <input
      id="confirm-password-input"
      type="password"
      class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      required
      formControlName="confirmPassword"
    />
    @if(signupControl.get('confirmPassword')?.hasError('required') &&
    signupControl.get('confirmPassword')?.touched) {
    <div class="text-red-500 text-sm">Please re-enter your password</div>
    } @if(signupControl.getError("passwordAreNotEqual")){
    <div class="text-red-500 text-sm">Passwords must match</div>
    }
  </div>
  <button
    type="submit"
    class="bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition"
    [disabled]="!signupControl.valid"
  >
    Sign Up
  </button>
  <div class="text-center">
    <span class="text-sm text-gray-600">Already have an account? </span>
    <a routerLink="/login" class="text-blue-600 hover:text-blue-700 text-sm">
      Log in here
    </a>
  </div>
</form>
